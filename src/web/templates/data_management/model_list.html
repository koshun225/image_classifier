{% extends "base.html" %}
{% load static %}

{% block title %}{{ theme.name }} - ãƒ¢ãƒ‡ãƒ«ä¸€è¦§{% endblock %}

{% block content %}
<div class="model-list-container">
    <div class="page-header">
        <h1>{{ theme.name }} - ãƒ¢ãƒ‡ãƒ«ä¸€è¦§</h1>
        <a href="{% url 'theme_detail' theme.id %}" class="btn btn-secondary">â† ç”»åƒä¸€è¦§ã«æˆ»ã‚‹</a>
        <a href="{% url 'model_development' theme.id %}" class="btn btn-primary">ğŸ¤– ãƒ¢ãƒ‡ãƒ«é–‹ç™º</a>
    </div>
    
    <div class="model-list-content">
        {% if models %}
        <table class="model-table">
            <thead>
                <tr>
                    <th>MLflow Run ID</th>
                    <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                    <th>æœ€è‰¯ã‚¹ã‚³ã‚¢</th>
                    <th>ä½œæˆè€…</th>
                    <th>ä½œæˆæ—¥æ™‚</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for model in models %}
                <tr>
                    <td>{{ model.mlflow_run_id }}</td>
                    <td>
                        <span class="status-badge status-{{ model.status }}">{{ model.get_status_display }}</span>
                    </td>
                    <td>
                        {% if model.best_score %}
                        {{ model.best_score|floatformat:4 }}
                        {% else %}
                        -
                        {% endif %}
                    </td>
                    <td>{{ model.created_by|default:"-" }}</td>
                    <td>{{ model.created_at|date:"Y-m-d H:i" }}</td>
                    <td>
                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                            {% if mlflow_experiment_id and models %}
                            <a href="{{ mlflow_ui_url }}/#/experiments/{{ mlflow_experiment_id }}/runs/{{ model.mlflow_run_id }}" target="_blank" class="btn btn-sm btn-secondary">MLflowã§è©³ç´°</a>
                            {% else %}
                            <span class="text-muted">ç™»éŒ²ãªã—</span>
                            {% endif %}
                            {% if model.training_params %}
                            <a href="{% url 'model_development' theme.id %}?model_id={{ model.id }}" class="btn btn-sm btn-primary">å†å­¦ç¿’</a>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="empty-state">
            <p>ã¾ã å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
            <a href="{% url 'model_development' theme.id %}" class="btn btn-primary">ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã‚’é–‹å§‹</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

